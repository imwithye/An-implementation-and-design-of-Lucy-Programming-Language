%!TEX root = ../dissertation.tex
\chapter{Introduction}
Programming language is the foundation of the computer world. In the first decades of the 20th century, numerical calculations were based on decimal numbers. Eventually it was realized that logic could be represented with numbers, not only with words. For example, Alonzo Church was able to express the lambda calculus in a formulaic way. The Turing machine was an abstraction of the operation of a tape-marking machine, for example, in use at the telephone companies. At very first, the programming language is just some instructions which are used to drive the computing machine. In 1954, language Fortran was invented at IBM became a widely used high level general purpose programming language. In 1969, the invitation of language C did really change the industry. A widely used operation system Unix is implemented in C and later the open source system kernel Linux and C compiler GCC were introduced to the GNU world. Now they are becoming the most popular and widely used system and compiler. \\
The programming language does change how people think the problem some how. To understand a language from the compiler is a very good way to understand how the computer and compiler work. Designing a compiler is also a good way explore language features. \\
This report describes an implementation of the a new language, Lucy programming language. The Lucy programming language is a dynamic language with static type checking. The Lucy compiler compiles Lucy code to Lucy assembly code and the Lucy virtual machine is a Just In Time compiler which translates the Lucy X assembly codes into Java byte code. Lucy aims to be safe, simple and elegant, which is a good start point for those who are interested in compiler design. \\
This report first discusses the related work in compiler and language design. Second, we will focus on the syntax and design of the Lucy programming language and Lucy X assembly language. Then we will talk about the implementation of the Lucy virtual machine. The implementation of the compiler and linker will be discussed in chapter 6 and chapter 7. Finally we will discuss the performance and issues of Lucy language. Future work and plans will be discuss in the last chapter.


\section{Objective}
Lucy is a general purpose programming language with dynamic type and static type checking system. The objective of the project is to create a low level representation of the Lucy language which is designed to be as simpler as possible. The goal of Lucy is an attempt to design a modern and elegant system level programming language while Lucy X aims to keep simple and easy. Lucy X tends to be a good start point for those who are interested in programming language design and compiler techniques. Lucy X also aims to be in SSA form which is a good point to learn optimization problem.


\section{Project Description}
This project aims to create a new language named Lucy and a compiler infrastructure. The Lucy is based on the virtual machine and assembly language provided by LJVM compiler infrastructure. LJVM is a library that is used to construct, optimize and produce intermediate code for Lucy virtual machine and it can act as a JIT compiler which translate the Lucy X code to Java or x86 instructions on fly.

\section{Overview of Lucy Lang}
\subsection{Lucy Programming Language}
The Lucy programming language is a dynamic type language with static type checking. The goal of Lucy language is to provide an elegant and safe way to ensure the correctness of scripting program. Similar to python, Lucy provides a run time type checking system to ensure each operation is done correctly. Meanwhile, inspired by TypeScript, Lucy provides static type checking to improve the robustness of the Lucy program. And every thing in Lucy is passed by value, even if the parameter is an array.

\subsection{Lucy X Assembly Language}
Lucy programming language is compiled and linked to a module in Lucy X assembly language. The Lucy X assembly language is inspired by MIPS assembly language and it provides dynamic type checking and scope isolation and inheritance. The Lucy X assembly language is formed by modules and routines and it stats executing from the main subroutine. The Lucy X assembly language will be finally interpreted by Lucy Virtual Machine.

\subsection{Lucy Virtual Machine}
Lucy Programming Language is a dynamic language which runs the code over Lucy Virtual Machine. The goal of the Lucy Virtual Machine is to provide a generic platform so that the source codes of Lucy can be interpreted over it. Lucy Virtual Machine is a single thread virtual machine and driven by a small set of instructions, Lucy X assembly language. Moreover, the Lucy Virtual machine provides unlimited registers, routine scope isolation and dynamic type checking. In this chapter, we will discuss the design of the Lucy virtual machine. First we will discuss the goal of Lucy virtual machine and the design principle. Then we will compare the Lucy virtual machine with the Java virtual machine. In the second part of this chapter, we will discuss how the register and scope isolation works and in the last part of this chapter, we will discuss how modules and routines are executed by the virtual machine.

\section{Organization of the Report}
In the first chapter, we will discuss related work in programming language and compiler design. We will compare static and dynamic type programming language and discuss the design of Java virtual machine and Python virtual machine. Moreover, we will talk about the MIPS assembly language. In the following two chapters, we will focus on the syntaxes of Lucy and Lucy X. The detailed implementation of Lucy virtual machine will be discussed in chapter 5. Next, implementation of compiler and linker will be discussed in chapter 6 and 7. Finally the performance analysis and issues of the current version will be discussed in chapter 8. Last but not least, we will propose some future plans of Lucy programming language in chapter 9. \\
Inspired by LLVM, works related to LLVM infrastructure will be attached in the appendix.
